<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="normalize.css">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300;1,400&family=Flow+Circular&family=M+PLUS+1:wght@100;200;300;400;500&family=Reenie+Beanie&family=Roboto+Mono:wght@300;400;500&display=swap" rel="stylesheet">  <link rel="stylesheet" href="normalize.css">


</head>
<body onload="generateCode()">
  <div aria-hidden="true" id="matrix-loader" class="matrix-loader">
    <div class="matrix-loader__divider"></div>
  </div>
  
  <main class="main">
    <div class="main__content">
      <div class="main__photographs photo-1">
        <img src="1.jpg" alt="A fairy-like forest in Norway."/>
      </div>
      <h1 class="main__heading">
        <span class="main__heading--supporting left-neg-100">Welcome to the site of</span>
        <span class="main__heading--accent">Kirsten Rauffer</span>
        <span class="main__heading--supporting left-100">A creator and a dreamer</span>      
      </h1>
      <div class="main__photographs photo-2">
        <img src="2.jpg" alt="Two sea lions cuddling in the sunlight."/>
      </div>
      <div class="main__photographs photo-3">
        <img src="3.jpg" alt="A view from the end of the Ausungate trek in Peru."/>
      </div>
      <div class="main__photographs photo-1-circle">
        <img src="1-circle.jpg" alt="A cactus weilding sunglasses at a town near Joshua Tree National Park."/>
      </div>
      <div class="main__photographs photo-4">
        <img src="4.jpg" alt="A cute plant spotted at the Conservatory of Flowers in San Fransisco."/>
      </div>
      <div class="main__photographs photo-2-circle">
        <img src="2-circle.jpg" alt="Myself with camera in hand at a baseball stadium in Denver, Colorado. A bright purple sky is behind me."/>
      </div>
      <!-- <div class="main__photographs photo-5">
        <img src="5.jpg" alt="A river bend during autumn in Yosemite National Park."/>
      </div> -->
      
    </div>
    <p class="main__heading--supporting">Site under construction</p>
    <div class="matrix-loader__divider"></div>
  </main>

  <script>
    const CHARACTERS = ['｢', '｣', '､', '･', 'ｦ', 'ｧ', 'ｨ', 'ｩ', 'ｪ', 'ｫ', 'ｬ', 'ｭ', 'ｮ', 'ｯ', 'ｰ', 'ｱ', 'ｲ', 'ｳ', 'ｴ', 'ｵ', 'ｶ', 'ｷ', 'ｸ', 'ｹ', 'ｺ', 'ｻ', 'ｼ', 'ｽ', 'ｾ', 'ｿ', 'ﾀ', 'ﾁ', 'ﾂ', 'ﾃ', 'ﾄ', 'ﾅ', 'ﾆ', 'ﾇ', 'ﾈ', 'ﾉ', 'ﾊ', 'ﾋ', 'ﾌ', 'ﾍ', 'ﾎ', 'ﾏ', 'ﾐ', 'ﾑ', 'ﾒ', 'ﾓ', 'ﾔ', 'ﾕ', 'ﾖ', 'ﾗ', 'ﾘ', 'ﾙ', 'ﾚ', 'ﾛ', 'ﾜ', 'ﾝ', 'ﾞ', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', 'A', 'B', 'C', 'D', 'E', 'V', 'Z', 'H', 'Θ', 'I', 'K', 'L', 'M', 'N', 'Ξ', 'O', 'P', 'Ś', 'Q', 'R', 'S', 'T', 'Y', 'X', 'Φ', 'Ψ', 'F'];

    /*
     * Generates the code loader.
     */
    const generateCode = () => {
      const worker = new Worker('animations.js')
      worker.onmessage = (event) => {
        if (event.data === 'generate') {
          _generateCode();
        } else {
          _cancelCode();
        }
      }
    }

    /*
     * Starts the code loader.
     */
    const _generateCode = () => {
      const loader = document.getElementById('matrix-loader');
      loader.appendChild(_generateCodeLine());
    }

    /*
     * Closes the code loader.
     */
    const _cancelCode = () => {
      const loader = document.getElementById('matrix-loader');
      loader.style.height = '5px';
    }

    /*
     * Generates a single vertical line of code.
     */
    const _generateCodeLine = () => {
      let codeLine = document.createElement('div');

      codeLine.classList = ['matrix-loader__code-line'];

      for (let i = 0; i < 25; i++) {
        const codeCharacter = document.createElement('span');
        codeCharacter.classList = ['matrix-loader__code-character'];
        _setCodeCharacter(codeCharacter);

        if (i%5) {
          setInterval(_setCodeCharacter, 300, codeCharacter);
        }
        codeLine.appendChild(codeCharacter);
      }

      codeLine.style.left = `${_getRandomInt(document.body.clientWidth)}px`;
      codeLine.style.top = `-${_getRandomInt(120, 40)}em`;
      return codeLine;
    }

    /*
     * Generates a character within the line of code.
     */
    const _setCodeCharacter = (el) => {
      el.innerText = CHARACTERS[_getRandomInt(CHARACTERS.length)];
    }

    /*
     * Generates a random integer given a maximum value.
     */
    const _getRandomInt = (max = 0, min = 0) => {
      return Math.floor(Math.random() * (max - min) + min);
    }
  </script>
</body>
</html>